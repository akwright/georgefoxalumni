{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/index.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA","file":"index.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","\"use strict\";!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i=\"function\"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error(\"Cannot find module '\"+g+\"'\");throw j.code=\"MODULE_NOT_FOUND\",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f=\"function\"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=[\"3g2\",\"3gp\",\"asf\",\"avi\",\"flv\",\"h264\",\"m4v\",\"mov\",\"mp4\",\"mpg\",\"mpeg\",\"rm\",\"srt\",\"swf\",\"vow\",\"vob\",\"wmv\"],e=\"image\",f=\"video\",g=\"none\",h={container:{\"class\":\"pv-container\",height:\"250px\"},block:{\"class\":\"pv-block\",speed:-Math.PI,mediatype:\"image\",mediapath:void 0,mute:!1}};b.exports={videoExtensions:d,defaultSettings:h,IMAGE:e,VIDEO:f,NONE:g}},{}],2:[function(a,b,c){b.exports={}},{}],3:[function(a,b,c){var d=a(\"./initContainer\"),e=d.setContainerHeight,f=a(\"./initBlock\"),g=f.setBlockSpeed,h=f.setBlockMediaProps,i=f.setBlockMute,j=f.setBlockVisual,k=f.setBlockAttributes,l=a(\"./constants\"),m=l.defaultSettings,n=l.VIDEO,o=l.NONE;b.exports=function(a){pv.containerArr=[],pv.settings=p(a,m);for(var b=document.getElementsByClassName(pv.settings.container[\"class\"]),c=0;c<b.length;c++){var d={};d.el=b[c],d.offset=q(d.el),d.el.style.height=e(d,pv.settings),d.height=d.el.clientHeight,d.blocks=[];for(var f=b[c].getElementsByClassName(pv.settings.block[\"class\"]),l=0;l<f.length;l++){var r={};r.el=f[l],r.speed=g(r,pv.settings);var s=h(r,pv.settings),t=s.mediatype,u=s.mediapath;if(r.mediatype=t,r.mediapath=u,r.mute=i(r,pv.settings),r.mediatype!==o){r.mediatype===n&&(d.hasVideoBlock=!0);j(r);k(d,r)}d.blocks.push(r)}pv.containerArr.push(d)}};var p=function(a,b){return a&&a!=={}?(a.container&&a.container!=={}?(a.container[\"class\"]||(a.container[\"class\"]=b.container[\"class\"]),a.container.height||(a.container.height=b.container.height)):a.container=b.container,a.block&&a.block!=={}?(a.block[\"class\"]||(a.block[\"class\"]=b.block[\"class\"]),a.block.speed||(a.block.speed=b.block.speed),a.block.mediatype||(a.block.mediatype=b.block.mediatype),a.block.mediapath||(a.block.mediapath=b.block.mediapath),a.block.mute||(a.block.mute=b.block.mute)):a.block=b.block,a):b},q=function(a){var b=a.getBoundingClientRect().top,c=window.pageYOffset||document.documentElement.scrollTop;return b+c}},{\"./constants\":1,\"./initBlock\":4,\"./initContainer\":5}],4:[function(a,b,c){var d=a(\"./constants\"),e=d.videoExtensions,f=d.IMAGE,g=d.VIDEO,h=d.NONE,i=function(a,b){var c=a.el.getAttribute(\"pv-speed\");if(!c)return b.block.speed;if(\"string\"==typeof c){var d=Number(c);if(isNaN(d))return;c=d}return 0==c?b.block.speed:c},j=function(a,b){var c=a.el.getAttribute(\"pv-mediatype\"),d=a.el.getAttribute(\"pv-mediapath\");return c===h?{mediatype:c,mediapath:d}:(c||(c=b.block.mediatype),d&&r(c,d)&&(c=g),d||c===h?{mediatype:c,mediapath:d}:void 0)},k=function(a,b){var c=a.el.getAttribute(\"pv-mute\");return c?\"true\"==c:b.block.mute},l=function(a){var b=(a.mediatype,a.mediapath);a.el.style.backgroundImage=\"url('\"+b+\"')\";var c=window.getComputedStyle(a.el).getPropertyValue(\"background-image\");return\"none\"!=c},m=function(a,b){pv.unmutedBlock&&pv.unmutedBlock.videoEl!==a&&(pv.unmutedBlock.videoEl.muted=!0,pv.unmutedBlock.audioButton.classList.add(\"mute\")),pv.unmutedBlock=b,a.muted=!a.muted,b.muted=a.muted,b.audioButton.classList.toggle(\"mute\")},n=function(a){var b=(a.mediatype,a.mediapath),c=document.createElement(\"video\");if(c.src=b,c.autoplay=!0,c.loop=!0,c.defaultMuted=!0,c.muted=!0,a.muted=!0,a.videoEl=c,a.el.appendChild(c),!a.mute){c.addEventListener(\"click\",function(){m(c,a)});var d=document.createElement(\"a\");d.href=\"#\",d.className+=\"audio-icon mute\",d.appendChild(document.createElement(\"span\")),d.addEventListener(\"click\",function(b){b.preventDefault(),m(c,a)}),a.audioButton=d,a.el.insertAdjacentElement(\"afterend\",d)}return!0},o=function(a){var b=a.mediatype;return b===f?l(a):b===g&&n(a)},p=function(a,b){s();var c=0,d=0,e=0;a.offset<pv.windowProps.windowHeight?(d=(a.height+a.offset)/Math.abs(b.speed),b.speed>0?(c=-Math.abs(a.offset),e=a.height+a.offset):e=d+a.height):(d=(a.height+pv.windowProps.windowHeight)/Math.abs(b.speed),e=d+a.height,b.speed>0?(c=-d,e=a.height+pv.windowProps.windowHeight/Math.abs(b.speed)):e=d+a.height),Math.abs(c)>=Math.abs(e)&&(e=Math.abs(c)+1),b.el.style.setProperty(\"padding-bottom\",e+\"px\",null),b.el.style.setProperty(\"margin-top\",c+\"px\",null)};b.exports={setBlockSpeed:i,setBlockMediaProps:j,setBlockMute:k,setBlockVisual:o,setBlockAttributes:p};var q=function(a){var b=a.substr(a.lastIndexOf(\".\")+1,a.length).toLowerCase();return b===-1?void 0:b},r=function(a,b){return a===g||e.indexOf(q(b))!==-1},s=function(){pv.windowProps={scrollTop:window.scrollY||document.documentElement.scrollTop,windowHeight:window.innerHeight,windowMidHeight:window.innerHeight/2}}},{\"./constants\":1}],5:[function(a,b,c){var d=function(a,b){var c=a.el.getAttribute(\"pv-height\");if(!c)return b.container.height;if(!isNaN(Number(c)))return c+\"px\";var d=c.substr(c.length-2,c.length);if(\"px\"==d||\"vh\"==d)return c;throw new Error('Invalid height suffix, expected \"px\" or \"vh\" but got: '+d)};b.exports={setContainerHeight:d}},{}],6:[function(a,b,c){arguments[4][4][0].apply(c,arguments)},{\"./constants\":1,dup:4}],7:[function(a,b,c){!function(b){var c=function(){var c={};c.init=a(\"./init\"),b.onresize=function(){return a(\"./resize\")()},b.raf=function(){return b.requestAnimationFrame||b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||function(a){b.setTimeout(a,1e3/60)}}();var d=function e(){a(\"./translate\")(),raf(e)};return raf(d),c};\"undefined\"==typeof pv&&(b.pv=c())}(window)},{\"./init\":3,\"./resize\":8,\"./translate\":9}],8:[function(a,b,c){var d=a(\"./constants\"),e=d.NONE,f=a(\"./initblock\"),g=f.setBlockAttributes;b.exports=function(){for(var a=0;a<pv.containerArr.length;a++){var b=pv.containerArr[a];b.height=b.el.clientHeight;for(var c=0;c<pv.containerArr[a].blocks.length;c++){var d=pv.containerArr[a].blocks[c];d.mediatype!==e&&g(b,d)}}}},{\"./constants\":1,\"./initblock\":6}],9:[function(a,b,c){b.exports=function(){if(pv.windowProps.scrollTop=window.scrollY||document.documentElement.scrollTop,pv.windowProps.scrollTop!==pv.prevScrollTop){pv.prevScrollTop=pv.windowProps.scrollTop;for(var a=0;a<pv.containerArr.length;a++){var b=pv.containerArr[a],c=void 0;if(e(b.offset,b.height)){a>pv.mostReContainerInViewport&&(pv.mostReContainerInViewport=a),c=b.offset<pv.windowProps.windowHeight?pv.windowProps.scrollTop:pv.windowProps.windowHeight-b.offset+pv.windowProps.scrollTop;for(var g=0;g<pv.containerArr[a].blocks.length;g++){var h=pv.containerArr[a].blocks[g];h.videoEl&&(h.videoEl.play(),h===pv.unmutedBlock&&(h.muted||(h.videoEl.muted=h.muted,h.muted?pv.unmutedBlock.audioButton.classList.add(\"mute\"):pv.unmutedBlock.audioButton.classList.remove(\"mute\")))),d(h.el,\"translate3d(0,\"+Math.round(c/h.speed)+\"px, 0)\")}}else{if(b.hasVideoBlock)for(var i=0;i<pv.containerArr[a].blocks.length;i++){var j=pv.containerArr[a].blocks[i];j.videoEl&&(j.videoEl.pause(),pv.unmutedBlock===j&&(j.videoEl.muted=!0))}var k=pv.containerArr[a+1];if(k&&!e(k.offset,k.height)&&pv.mostReContainerInViewport<a&&!f(b,k))break;k&&e(k.offset,k.height)&&(pv.mostReContainerInViewport=a+1)}}}};var d=function(a,b){a.style.webkitTransform=b,a.style.MozTransform=b,a.style.msTransform=b,a.style.OTransform=b,a.style.transform=b},e=function(a,b){return pv.windowProps.scrollTop+pv.windowProps.windowHeight-a>0&&pv.windowProps.scrollTop<a+b},f=function(a,b){return a.offset+a.height>b.offset+b.height}},{}]},{},[1,2,3,4,5,7,8,9]);\n\npv.init();"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiXCJ1c2Ugc3RyaWN0XCI7IWZ1bmN0aW9uIGEoYixjLGQpe2Z1bmN0aW9uIGUoZyxoKXtpZighY1tnXSl7aWYoIWJbZ10pe3ZhciBpPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWgmJmkpcmV0dXJuIGkoZywhMCk7aWYoZilyZXR1cm4gZihnLCEwKTt2YXIgaj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2crXCInXCIpO3Rocm93IGouY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixqfXZhciBrPWNbZ109e2V4cG9ydHM6e319O2JbZ11bMF0uY2FsbChrLmV4cG9ydHMsZnVuY3Rpb24oYSl7dmFyIGM9YltnXVsxXVthXTtyZXR1cm4gZShjP2M6YSl9LGssay5leHBvcnRzLGEsYixjLGQpfXJldHVybiBjW2ddLmV4cG9ydHN9Zm9yKHZhciBmPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsZz0wO2c8ZC5sZW5ndGg7ZysrKWUoZFtnXSk7cmV0dXJuIGV9KHsxOltmdW5jdGlvbihhLGIsYyl7dmFyIGQ9W1wiM2cyXCIsXCIzZ3BcIixcImFzZlwiLFwiYXZpXCIsXCJmbHZcIixcImgyNjRcIixcIm00dlwiLFwibW92XCIsXCJtcDRcIixcIm1wZ1wiLFwibXBlZ1wiLFwicm1cIixcInNydFwiLFwic3dmXCIsXCJ2b3dcIixcInZvYlwiLFwid212XCJdLGU9XCJpbWFnZVwiLGY9XCJ2aWRlb1wiLGc9XCJub25lXCIsaD17Y29udGFpbmVyOntcImNsYXNzXCI6XCJwdi1jb250YWluZXJcIixoZWlnaHQ6XCIyNTBweFwifSxibG9jazp7XCJjbGFzc1wiOlwicHYtYmxvY2tcIixzcGVlZDotTWF0aC5QSSxtZWRpYXR5cGU6XCJpbWFnZVwiLG1lZGlhcGF0aDp2b2lkIDAsbXV0ZTohMX19O2IuZXhwb3J0cz17dmlkZW9FeHRlbnNpb25zOmQsZGVmYXVsdFNldHRpbmdzOmgsSU1BR0U6ZSxWSURFTzpmLE5PTkU6Z319LHt9XSwyOltmdW5jdGlvbihhLGIsYyl7Yi5leHBvcnRzPXt9fSx7fV0sMzpbZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEoXCIuL2luaXRDb250YWluZXJcIiksZT1kLnNldENvbnRhaW5lckhlaWdodCxmPWEoXCIuL2luaXRCbG9ja1wiKSxnPWYuc2V0QmxvY2tTcGVlZCxoPWYuc2V0QmxvY2tNZWRpYVByb3BzLGk9Zi5zZXRCbG9ja011dGUsaj1mLnNldEJsb2NrVmlzdWFsLGs9Zi5zZXRCbG9ja0F0dHJpYnV0ZXMsbD1hKFwiLi9jb25zdGFudHNcIiksbT1sLmRlZmF1bHRTZXR0aW5ncyxuPWwuVklERU8sbz1sLk5PTkU7Yi5leHBvcnRzPWZ1bmN0aW9uKGEpe3B2LmNvbnRhaW5lckFycj1bXSxwdi5zZXR0aW5ncz1wKGEsbSk7Zm9yKHZhciBiPWRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUocHYuc2V0dGluZ3MuY29udGFpbmVyW1wiY2xhc3NcIl0pLGM9MDtjPGIubGVuZ3RoO2MrKyl7dmFyIGQ9e307ZC5lbD1iW2NdLGQub2Zmc2V0PXEoZC5lbCksZC5lbC5zdHlsZS5oZWlnaHQ9ZShkLHB2LnNldHRpbmdzKSxkLmhlaWdodD1kLmVsLmNsaWVudEhlaWdodCxkLmJsb2Nrcz1bXTtmb3IodmFyIGY9YltjXS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKHB2LnNldHRpbmdzLmJsb2NrW1wiY2xhc3NcIl0pLGw9MDtsPGYubGVuZ3RoO2wrKyl7dmFyIHI9e307ci5lbD1mW2xdLHIuc3BlZWQ9ZyhyLHB2LnNldHRpbmdzKTt2YXIgcz1oKHIscHYuc2V0dGluZ3MpLHQ9cy5tZWRpYXR5cGUsdT1zLm1lZGlhcGF0aDtpZihyLm1lZGlhdHlwZT10LHIubWVkaWFwYXRoPXUsci5tdXRlPWkocixwdi5zZXR0aW5ncyksci5tZWRpYXR5cGUhPT1vKXtyLm1lZGlhdHlwZT09PW4mJihkLmhhc1ZpZGVvQmxvY2s9ITApO2oocik7ayhkLHIpfWQuYmxvY2tzLnB1c2gocil9cHYuY29udGFpbmVyQXJyLnB1c2goZCl9fTt2YXIgcD1mdW5jdGlvbihhLGIpe3JldHVybiBhJiZhIT09e30/KGEuY29udGFpbmVyJiZhLmNvbnRhaW5lciE9PXt9PyhhLmNvbnRhaW5lcltcImNsYXNzXCJdfHwoYS5jb250YWluZXJbXCJjbGFzc1wiXT1iLmNvbnRhaW5lcltcImNsYXNzXCJdKSxhLmNvbnRhaW5lci5oZWlnaHR8fChhLmNvbnRhaW5lci5oZWlnaHQ9Yi5jb250YWluZXIuaGVpZ2h0KSk6YS5jb250YWluZXI9Yi5jb250YWluZXIsYS5ibG9jayYmYS5ibG9jayE9PXt9PyhhLmJsb2NrW1wiY2xhc3NcIl18fChhLmJsb2NrW1wiY2xhc3NcIl09Yi5ibG9ja1tcImNsYXNzXCJdKSxhLmJsb2NrLnNwZWVkfHwoYS5ibG9jay5zcGVlZD1iLmJsb2NrLnNwZWVkKSxhLmJsb2NrLm1lZGlhdHlwZXx8KGEuYmxvY2subWVkaWF0eXBlPWIuYmxvY2subWVkaWF0eXBlKSxhLmJsb2NrLm1lZGlhcGF0aHx8KGEuYmxvY2subWVkaWFwYXRoPWIuYmxvY2subWVkaWFwYXRoKSxhLmJsb2NrLm11dGV8fChhLmJsb2NrLm11dGU9Yi5ibG9jay5tdXRlKSk6YS5ibG9jaz1iLmJsb2NrLGEpOmJ9LHE9ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AsYz13aW5kb3cucGFnZVlPZmZzZXR8fGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7cmV0dXJuIGIrY319LHtcIi4vY29uc3RhbnRzXCI6MSxcIi4vaW5pdEJsb2NrXCI6NCxcIi4vaW5pdENvbnRhaW5lclwiOjV9XSw0OltmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YShcIi4vY29uc3RhbnRzXCIpLGU9ZC52aWRlb0V4dGVuc2lvbnMsZj1kLklNQUdFLGc9ZC5WSURFTyxoPWQuTk9ORSxpPWZ1bmN0aW9uKGEsYil7dmFyIGM9YS5lbC5nZXRBdHRyaWJ1dGUoXCJwdi1zcGVlZFwiKTtpZighYylyZXR1cm4gYi5ibG9jay5zcGVlZDtpZihcInN0cmluZ1wiPT10eXBlb2YgYyl7dmFyIGQ9TnVtYmVyKGMpO2lmKGlzTmFOKGQpKXJldHVybjtjPWR9cmV0dXJuIDA9PWM/Yi5ibG9jay5zcGVlZDpjfSxqPWZ1bmN0aW9uKGEsYil7dmFyIGM9YS5lbC5nZXRBdHRyaWJ1dGUoXCJwdi1tZWRpYXR5cGVcIiksZD1hLmVsLmdldEF0dHJpYnV0ZShcInB2LW1lZGlhcGF0aFwiKTtyZXR1cm4gYz09PWg/e21lZGlhdHlwZTpjLG1lZGlhcGF0aDpkfTooY3x8KGM9Yi5ibG9jay5tZWRpYXR5cGUpLGQmJnIoYyxkKSYmKGM9ZyksZHx8Yz09PWg/e21lZGlhdHlwZTpjLG1lZGlhcGF0aDpkfTp2b2lkIDApfSxrPWZ1bmN0aW9uKGEsYil7dmFyIGM9YS5lbC5nZXRBdHRyaWJ1dGUoXCJwdi1tdXRlXCIpO3JldHVybiBjP1widHJ1ZVwiPT1jOmIuYmxvY2subXV0ZX0sbD1mdW5jdGlvbihhKXt2YXIgYj0oYS5tZWRpYXR5cGUsYS5tZWRpYXBhdGgpO2EuZWwuc3R5bGUuYmFja2dyb3VuZEltYWdlPVwidXJsKCdcIitiK1wiJylcIjt2YXIgYz13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShhLmVsKS5nZXRQcm9wZXJ0eVZhbHVlKFwiYmFja2dyb3VuZC1pbWFnZVwiKTtyZXR1cm5cIm5vbmVcIiE9Y30sbT1mdW5jdGlvbihhLGIpe3B2LnVubXV0ZWRCbG9jayYmcHYudW5tdXRlZEJsb2NrLnZpZGVvRWwhPT1hJiYocHYudW5tdXRlZEJsb2NrLnZpZGVvRWwubXV0ZWQ9ITAscHYudW5tdXRlZEJsb2NrLmF1ZGlvQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJtdXRlXCIpKSxwdi51bm11dGVkQmxvY2s9YixhLm11dGVkPSFhLm11dGVkLGIubXV0ZWQ9YS5tdXRlZCxiLmF1ZGlvQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJtdXRlXCIpfSxuPWZ1bmN0aW9uKGEpe3ZhciBiPShhLm1lZGlhdHlwZSxhLm1lZGlhcGF0aCksYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidmlkZW9cIik7aWYoYy5zcmM9YixjLmF1dG9wbGF5PSEwLGMubG9vcD0hMCxjLmRlZmF1bHRNdXRlZD0hMCxjLm11dGVkPSEwLGEubXV0ZWQ9ITAsYS52aWRlb0VsPWMsYS5lbC5hcHBlbmRDaGlsZChjKSwhYS5tdXRlKXtjLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLGZ1bmN0aW9uKCl7bShjLGEpfSk7dmFyIGQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7ZC5ocmVmPVwiI1wiLGQuY2xhc3NOYW1lKz1cImF1ZGlvLWljb24gbXV0ZVwiLGQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIikpLGQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsZnVuY3Rpb24oYil7Yi5wcmV2ZW50RGVmYXVsdCgpLG0oYyxhKX0pLGEuYXVkaW9CdXR0b249ZCxhLmVsLmluc2VydEFkamFjZW50RWxlbWVudChcImFmdGVyZW5kXCIsZCl9cmV0dXJuITB9LG89ZnVuY3Rpb24oYSl7dmFyIGI9YS5tZWRpYXR5cGU7cmV0dXJuIGI9PT1mP2woYSk6Yj09PWcmJm4oYSl9LHA9ZnVuY3Rpb24oYSxiKXtzKCk7dmFyIGM9MCxkPTAsZT0wO2Eub2Zmc2V0PHB2LndpbmRvd1Byb3BzLndpbmRvd0hlaWdodD8oZD0oYS5oZWlnaHQrYS5vZmZzZXQpL01hdGguYWJzKGIuc3BlZWQpLGIuc3BlZWQ+MD8oYz0tTWF0aC5hYnMoYS5vZmZzZXQpLGU9YS5oZWlnaHQrYS5vZmZzZXQpOmU9ZCthLmhlaWdodCk6KGQ9KGEuaGVpZ2h0K3B2LndpbmRvd1Byb3BzLndpbmRvd0hlaWdodCkvTWF0aC5hYnMoYi5zcGVlZCksZT1kK2EuaGVpZ2h0LGIuc3BlZWQ+MD8oYz0tZCxlPWEuaGVpZ2h0K3B2LndpbmRvd1Byb3BzLndpbmRvd0hlaWdodC9NYXRoLmFicyhiLnNwZWVkKSk6ZT1kK2EuaGVpZ2h0KSxNYXRoLmFicyhjKT49TWF0aC5hYnMoZSkmJihlPU1hdGguYWJzKGMpKzEpLGIuZWwuc3R5bGUuc2V0UHJvcGVydHkoXCJwYWRkaW5nLWJvdHRvbVwiLGUrXCJweFwiLG51bGwpLGIuZWwuc3R5bGUuc2V0UHJvcGVydHkoXCJtYXJnaW4tdG9wXCIsYytcInB4XCIsbnVsbCl9O2IuZXhwb3J0cz17c2V0QmxvY2tTcGVlZDppLHNldEJsb2NrTWVkaWFQcm9wczpqLHNldEJsb2NrTXV0ZTprLHNldEJsb2NrVmlzdWFsOm8sc2V0QmxvY2tBdHRyaWJ1dGVzOnB9O3ZhciBxPWZ1bmN0aW9uKGEpe3ZhciBiPWEuc3Vic3RyKGEubGFzdEluZGV4T2YoXCIuXCIpKzEsYS5sZW5ndGgpLnRvTG93ZXJDYXNlKCk7cmV0dXJuIGI9PT0tMT92b2lkIDA6Yn0scj1mdW5jdGlvbihhLGIpe3JldHVybiBhPT09Z3x8ZS5pbmRleE9mKHEoYikpIT09LTF9LHM9ZnVuY3Rpb24oKXtwdi53aW5kb3dQcm9wcz17c2Nyb2xsVG9wOndpbmRvdy5zY3JvbGxZfHxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wLHdpbmRvd0hlaWdodDp3aW5kb3cuaW5uZXJIZWlnaHQsd2luZG93TWlkSGVpZ2h0OndpbmRvdy5pbm5lckhlaWdodC8yfX19LHtcIi4vY29uc3RhbnRzXCI6MX1dLDU6W2Z1bmN0aW9uKGEsYixjKXt2YXIgZD1mdW5jdGlvbihhLGIpe3ZhciBjPWEuZWwuZ2V0QXR0cmlidXRlKFwicHYtaGVpZ2h0XCIpO2lmKCFjKXJldHVybiBiLmNvbnRhaW5lci5oZWlnaHQ7aWYoIWlzTmFOKE51bWJlcihjKSkpcmV0dXJuIGMrXCJweFwiO3ZhciBkPWMuc3Vic3RyKGMubGVuZ3RoLTIsYy5sZW5ndGgpO2lmKFwicHhcIj09ZHx8XCJ2aFwiPT1kKXJldHVybiBjO3Rocm93IG5ldyBFcnJvcignSW52YWxpZCBoZWlnaHQgc3VmZml4LCBleHBlY3RlZCBcInB4XCIgb3IgXCJ2aFwiIGJ1dCBnb3Q6ICcrZCl9O2IuZXhwb3J0cz17c2V0Q29udGFpbmVySGVpZ2h0OmR9fSx7fV0sNjpbZnVuY3Rpb24oYSxiLGMpe2FyZ3VtZW50c1s0XVs0XVswXS5hcHBseShjLGFyZ3VtZW50cyl9LHtcIi4vY29uc3RhbnRzXCI6MSxkdXA6NH1dLDc6W2Z1bmN0aW9uKGEsYixjKXshZnVuY3Rpb24oYil7dmFyIGM9ZnVuY3Rpb24oKXt2YXIgYz17fTtjLmluaXQ9YShcIi4vaW5pdFwiKSxiLm9ucmVzaXplPWZ1bmN0aW9uKCl7cmV0dXJuIGEoXCIuL3Jlc2l6ZVwiKSgpfSxiLnJhZj1mdW5jdGlvbigpe3JldHVybiBiLnJlcXVlc3RBbmltYXRpb25GcmFtZXx8Yi53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGIubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbihhKXtiLnNldFRpbWVvdXQoYSwxZTMvNjApfX0oKTt2YXIgZD1mdW5jdGlvbiBlKCl7YShcIi4vdHJhbnNsYXRlXCIpKCkscmFmKGUpfTtyZXR1cm4gcmFmKGQpLGN9O1widW5kZWZpbmVkXCI9PXR5cGVvZiBwdiYmKGIucHY9YygpKX0od2luZG93KX0se1wiLi9pbml0XCI6MyxcIi4vcmVzaXplXCI6OCxcIi4vdHJhbnNsYXRlXCI6OX1dLDg6W2Z1bmN0aW9uKGEsYixjKXt2YXIgZD1hKFwiLi9jb25zdGFudHNcIiksZT1kLk5PTkUsZj1hKFwiLi9pbml0YmxvY2tcIiksZz1mLnNldEJsb2NrQXR0cmlidXRlcztiLmV4cG9ydHM9ZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPHB2LmNvbnRhaW5lckFyci5sZW5ndGg7YSsrKXt2YXIgYj1wdi5jb250YWluZXJBcnJbYV07Yi5oZWlnaHQ9Yi5lbC5jbGllbnRIZWlnaHQ7Zm9yKHZhciBjPTA7Yzxwdi5jb250YWluZXJBcnJbYV0uYmxvY2tzLmxlbmd0aDtjKyspe3ZhciBkPXB2LmNvbnRhaW5lckFyclthXS5ibG9ja3NbY107ZC5tZWRpYXR5cGUhPT1lJiZnKGIsZCl9fX19LHtcIi4vY29uc3RhbnRzXCI6MSxcIi4vaW5pdGJsb2NrXCI6Nn1dLDk6W2Z1bmN0aW9uKGEsYixjKXtiLmV4cG9ydHM9ZnVuY3Rpb24oKXtpZihwdi53aW5kb3dQcm9wcy5zY3JvbGxUb3A9d2luZG93LnNjcm9sbFl8fGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AscHYud2luZG93UHJvcHMuc2Nyb2xsVG9wIT09cHYucHJldlNjcm9sbFRvcCl7cHYucHJldlNjcm9sbFRvcD1wdi53aW5kb3dQcm9wcy5zY3JvbGxUb3A7Zm9yKHZhciBhPTA7YTxwdi5jb250YWluZXJBcnIubGVuZ3RoO2ErKyl7dmFyIGI9cHYuY29udGFpbmVyQXJyW2FdLGM9dm9pZCAwO2lmKGUoYi5vZmZzZXQsYi5oZWlnaHQpKXthPnB2Lm1vc3RSZUNvbnRhaW5lckluVmlld3BvcnQmJihwdi5tb3N0UmVDb250YWluZXJJblZpZXdwb3J0PWEpLGM9Yi5vZmZzZXQ8cHYud2luZG93UHJvcHMud2luZG93SGVpZ2h0P3B2LndpbmRvd1Byb3BzLnNjcm9sbFRvcDpwdi53aW5kb3dQcm9wcy53aW5kb3dIZWlnaHQtYi5vZmZzZXQrcHYud2luZG93UHJvcHMuc2Nyb2xsVG9wO2Zvcih2YXIgZz0wO2c8cHYuY29udGFpbmVyQXJyW2FdLmJsb2Nrcy5sZW5ndGg7ZysrKXt2YXIgaD1wdi5jb250YWluZXJBcnJbYV0uYmxvY2tzW2ddO2gudmlkZW9FbCYmKGgudmlkZW9FbC5wbGF5KCksaD09PXB2LnVubXV0ZWRCbG9jayYmKGgubXV0ZWR8fChoLnZpZGVvRWwubXV0ZWQ9aC5tdXRlZCxoLm11dGVkP3B2LnVubXV0ZWRCbG9jay5hdWRpb0J1dHRvbi5jbGFzc0xpc3QuYWRkKFwibXV0ZVwiKTpwdi51bm11dGVkQmxvY2suYXVkaW9CdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcIm11dGVcIikpKSksZChoLmVsLFwidHJhbnNsYXRlM2QoMCxcIitNYXRoLnJvdW5kKGMvaC5zcGVlZCkrXCJweCwgMClcIil9fWVsc2V7aWYoYi5oYXNWaWRlb0Jsb2NrKWZvcih2YXIgaT0wO2k8cHYuY29udGFpbmVyQXJyW2FdLmJsb2Nrcy5sZW5ndGg7aSsrKXt2YXIgaj1wdi5jb250YWluZXJBcnJbYV0uYmxvY2tzW2ldO2oudmlkZW9FbCYmKGoudmlkZW9FbC5wYXVzZSgpLHB2LnVubXV0ZWRCbG9jaz09PWomJihqLnZpZGVvRWwubXV0ZWQ9ITApKX12YXIgaz1wdi5jb250YWluZXJBcnJbYSsxXTtpZihrJiYhZShrLm9mZnNldCxrLmhlaWdodCkmJnB2Lm1vc3RSZUNvbnRhaW5lckluVmlld3BvcnQ8YSYmIWYoYixrKSlicmVhaztrJiZlKGsub2Zmc2V0LGsuaGVpZ2h0KSYmKHB2Lm1vc3RSZUNvbnRhaW5lckluVmlld3BvcnQ9YSsxKX19fX07dmFyIGQ9ZnVuY3Rpb24oYSxiKXthLnN0eWxlLndlYmtpdFRyYW5zZm9ybT1iLGEuc3R5bGUuTW96VHJhbnNmb3JtPWIsYS5zdHlsZS5tc1RyYW5zZm9ybT1iLGEuc3R5bGUuT1RyYW5zZm9ybT1iLGEuc3R5bGUudHJhbnNmb3JtPWJ9LGU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gcHYud2luZG93UHJvcHMuc2Nyb2xsVG9wK3B2LndpbmRvd1Byb3BzLndpbmRvd0hlaWdodC1hPjAmJnB2LndpbmRvd1Byb3BzLnNjcm9sbFRvcDxhK2J9LGY9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5vZmZzZXQrYS5oZWlnaHQ+Yi5vZmZzZXQrYi5oZWlnaHR9fSx7fV19LHt9LFsxLDIsMyw0LDUsNyw4LDldKTtcblxucHYuaW5pdCgpOyJdfQ=="}